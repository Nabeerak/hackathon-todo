# ==========================================
# Full-Stack Todo Application - Environment Configuration
# ==========================================
# Copy this file to .env and update the values for your environment
# DO NOT commit .env file to version control

# ------------------------------------------
# Database Configuration
# ------------------------------------------
# PostgreSQL connection string
# Format: postgresql://user:password@host:port/database?options
# Example local: postgresql://user:password@localhost:5432/todo_db
# Example Neon: postgresql://user:password@host.neon.tech/dbname?sslmode=require
DATABASE_URL=postgresql://user:password@localhost:5432/todo_db

# ------------------------------------------
# JWT Authentication Configuration
# ------------------------------------------
# Secret key for signing JWT tokens
# SECURITY: Use a strong random string in production (at least 32 characters)
# Generate: openssl rand -hex 32
JWT_SECRET_KEY=your-secret-key-here-change-in-production

# JWT signing algorithm (default: HS256)
JWT_ALGORITHM=HS256

# JWT token expiration in days (default: 7)
JWT_EXPIRE_DAYS=7

# ------------------------------------------
# API URLs
# ------------------------------------------
# Backend API URL (used by backend for CORS and internal references)
BACKEND_URL=http://localhost:8000

# Frontend URL (used for CORS configuration)
FRONTEND_URL=http://localhost:3000

# ------------------------------------------
# CORS Configuration
# ------------------------------------------
# Comma-separated list of allowed origins for CORS
# Include all frontend URLs that will access the API
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# ------------------------------------------
# Application Environment
# ------------------------------------------
# Environment name: development, staging, production
# Affects logging levels and error detail visibility
ENVIRONMENT=development

# ------------------------------------------
# Frontend Configuration (Optional)
# ------------------------------------------
# Backend API URL for frontend API calls
# Default: http://localhost:8000
# NEXT_PUBLIC_API_URL=http://localhost:8000

# ------------------------------------------
# Phase 3: AI Configuration
# ------------------------------------------
# OpenAI API key for AI-powered task assistant
# Get your key from: https://platform.openai.com/api-keys
# SECURITY: Keep this secret, never commit to version control
OPENAI_API_KEY=sk-proj-your-key-here

# OpenAI model to use for task extraction and chat
# Default: gpt-4o-mini (cost-effective, fast)
# Alternative: gpt-4o (more capable but more expensive)
OPENAI_MODEL=gpt-4o-mini

# Maximum tokens for OpenAI API responses
# Controls response length and cost
# Optimized for <$0.15/user/month cost target
OPENAI_MAX_TOKENS=200

# Temperature for OpenAI completions (0.0-2.0)
# Lower = more deterministic, Higher = more creative
# Default: 0.3 for task extraction (deterministic)
OPENAI_TEMPERATURE=0.3

# ------------------------------------------
# Phase 3: Rate Limiting
# ------------------------------------------
# Maximum AI requests per user per day
# Prevents API cost abuse
# Reduced to 15/day to meet cost budget (~$0.12/user/month)
AI_RATE_LIMIT_PER_DAY=15

# Maximum AI requests per user per hour
# Prevents short-term abuse
AI_RATE_LIMIT_PER_HOUR=5

# ------------------------------------------
# Phase 3: Feature Flags
# ------------------------------------------
# Enable or disable AI features globally
# Set to false to disable AI assistant (users can still use traditional forms)
AI_FEATURES_ENABLED=true

# ==========================================
# Production Deployment Notes
# ==========================================
#
# 1. Database:
#    - Use a production PostgreSQL database (Neon, Supabase, Railway, etc.)
#    - Ensure SSL is enabled (?sslmode=require)
#    - Set up connection pooling for better performance
#
# 2. Security:
#    - Generate a new JWT_SECRET_KEY using: openssl rand -hex 32
#    - NEVER commit the actual .env file with secrets
#    - Consider using environment variable management (Vercel, Railway, etc.)
#
# 3. URLs:
#    - Update BACKEND_URL to your production API domain
#    - Update FRONTEND_URL to your production frontend domain
#    - Update ALLOWED_ORIGINS to include production domains
#
# 4. Environment:
#    - Set ENVIRONMENT=production for production deployments
#    - This disables detailed error messages in API responses
#
# 5. Phase 3 AI (New):
#    - Use a production OpenAI API key (not development key)
#    - Set AI_RATE_LIMIT_PER_DAY to prevent cost overruns
#    - Monitor OpenAI API usage at https://platform.openai.com/usage
#    - Estimated cost: ~$0.12/user/month with 15 messages/day, 200 max_tokens (GPT-4o-mini)
#
# ==========================================
